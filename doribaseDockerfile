#####################################
# doirisks/doribase
# by Ted M
#
# the docker image from which the dori image should be built
# pre-installs apache and python packages (and R?) for the dori docker
#####################################

FROM ubuntu:14.04
MAINTAINER "DOI RISKS"

# update the container to make installation possible
# key in next line comes from http://archive.linux.duke.edu/cran/bin/linux/debian/
RUN DEBIAN_FRONTEND=noninteractive apt-key adv --keyserver keys.gnupg.net --recv-key 381BA480 
RUN DEBIAN_FRONTEND=noninteractive echo "deb http://archive.linux.duke.edu/cran/bin/linux/debian jessie-cran3/" >> /etc/apt/sources.list
RUN DEBIAN_FRONTEND=noninteractive apt-get update -y
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y apache2
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y mysql-server
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y php5
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y php5-mysql

# install necessary python (condense to a requirements.txt or .yml or something?)
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y python2.7
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y python-sql
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y python-MySQLdb
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y python-numpy

# install R
RUN DEBIAN_FRONTEND=noninteractive apt-get install -y r-base

